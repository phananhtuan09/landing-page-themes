{
  "hooks": [
    {
      "id": "validate-planning-doc",
      "description": "Validate planning doc structure after creation",
      "event": "PostToolUse",
      "tools": ["Write"],
      "matchPath": "docs/ai/planning/feature-*.md",
      "type": "prompt",
      "prompt": "Validate this planning document has all required sections: 1. Goal & Acceptance Criteria, 2. Risks & Assumptions, 3. Definition of Done, 4. Implementation Plan (with Summary and Phases), 5. Follow-ups. Return JSON: {\"valid\": true/false, \"missing\": [list of missing sections], \"message\": \"brief validation result\"}",
      "blocking": false
    },
    {
      "id": "validate-phase-completion",
      "description": "Check if all tasks in a phase are completed before moving to next phase",
      "event": "PreToolUse",
      "tools": ["Edit"],
      "matchPath": "docs/ai/planning/feature-*.md",
      "type": "prompt",
      "prompt": "Before editing this planning doc, check if the agent is starting a new phase. If yes, verify all tasks in the previous phase are marked [x]. Return JSON: {\"canProceed\": true/false, \"message\": \"reason\"}",
      "blocking": false
    },
    {
      "id": "log-feature-progress",
      "description": "Log when tasks are completed in planning docs",
      "event": "PostToolUse",
      "tools": ["Edit"],
      "matchPath": "docs/ai/planning/feature-*.md",
      "type": "command",
      "command": "echo \"[$(date '+%Y-%m-%d %H:%M:%S')] Task updated in $FILE\" >> .claude/feature-progress.log",
      "blocking": false
    }
  ]
}
